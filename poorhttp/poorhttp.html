<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Poor HTTP homepage documentation">
    <meta name="keywords" content="wsgi http python server web hosting">
    <meta name="author" content="Ondřej Tůma McBig">

    <title>Poor HTTP for Python</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="web.css">

    <link rel="shortcut icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="small-logo.png">
  </head>
  <body>
    <div class="page">

      <div class="header">
        <img class="right" src="small-logo.png" alt="logo">
        <h1>Poor HTTP for Python</h1>
        <small>HTTP / WSGI Server based on Python Simple Server.</small>
        <div class="pannel">
          <menu class="main">
            <span class="item selected"><a href="poorhttp.html" title="" >Documentation</a></span>
            <span class="item "><a href="poorhttp_licence.html" title="">Licence</a></span>
            <span class="item"><a href="https://github.com/PoorHttp/PoorHTTP">GitHub</a></span>
            <span class="item"><a href="https://github.com/PoorHttp/PoorHTTP/issues">Issues</a></span>
            <span class="item"><a href="https://groups.google.com/d/forum/poorhttp">Forum</a></span>
            <span class="item"><a href="..">PoorHttp</a></span>
          </menu>
          <!--
          <menu class="languages">
            <span class="item selected"><a href="#" title="" >cz</a></span>
            <span class="item"><a href="#" title="" >en</a></span>
          </menu>
          !-->
        </div><!-- menu --!>
      </div><!-- header --!>

      <menu class="sidebar">
            <h2><a href="#What is Poor HTTP">What is Poor HTTP</a></h2>
                                <h2><a href="#Running">Running</a></h2>
                                <h3><a href="#init.d script">init.d script</a></h3>
                                <h2><a href="#Get Poor HTTP">Get Poor HTTP</a></h2>
                                                                                            <h2><a href="#Configuration">Configuration</a></h2>
                                                                                                                                                                                                                                                                                                                                <h3><a href="#environ">environ</a></h3>
                                <h2><a href="#History and Future">History and Future</a></h2>
                                <h3><a href="#ChangeLog">ChangeLog</a></h3>
                              </menu><!-- sidebar --!>

    <div class="content">
                <h2>What is Poor HTTP
        <span class="links">
          <a name="What is Poor HTTP" href="#What is Poor HTTP">link</a> |
          <a href="#">top</a></span></h2>
                      <div>Poor HTTP is part of Poor Http package of web publishing tools for application
developers. HTTP means thet is HTTP / WSGI server. It is based on Python
Simple Server from wsgiref package. In history, Poor HTTP and Poor WSGI was be
one Poor Http project, but with comming wsgi servers, they was be separeted.
It is easy to use. There are few python files as library, which this server
use. Server supported ini configuration file, and in package, there is init
script, which can start this server.<br><br>

It is not installed to production environment what i know, but it could be
fine for developing. It knows user swithing, error access logging like big
servers like Appache. It is write in python, so no compilation is needed.
There was be smart importing mechanism, but it was not work, because it could
be so hard in python. At this time, it support three type of request handling.
Single, Forking and Threading server type.</div>
                      <h2>Running
        <span class="links">
          <a name="Running" href="#Running">link</a> |
          <a href="#">top</a></span></h2>
                      <div>There are some arguments, which you can put to poorhttp server script. After
info options like <code>-v</code> or <code>-h</code>, you can put path to config file, path to
pidfile, address and port which server listen on.
<pre class="text">
    Poor http - python web server
    Usage: 
         poorhttp [options]

    Options:
         -h, --help                        only print this help text
         -v, --version                     only print server version

         --config=/etc/poorhttp.ini        config file, default ./poorhttp.ini
         --pidfile=/var/run/poorhttp.pid   pid file, by default gets from config
         --address=127.0.0.1               listening address, by default gets from
                                           config
         --port=8080                       listening port, by default gets from
                                           config</pre>
You can run like this:
<pre class="text">
    poorhttp --pidfile=/my/pidfile.pid --config=/my/config.ini &amp;</pre>
If you want to run with in optimize mode, you must run with python command:
<pre class="text">
    python -O poorhttp --pidfile=/my/pidfile.pid --config=/my/config.ini &amp;</pre></div>
                      <h3>init.d script
        <span class="links">
          <a name="init.d script" href="#init.d script">link</a> |
          <a href="#">top</a></span></h3>
                      <div>There is init.d script in pacakge. You can fork this script as simple init
script for your projects. You can configure the simple with a few variables at
head of it, or you can use as init script for one instance Poor HTTP in your
system. But your posix system have probably own init.d scripts with more
functionality then this simple example script.
<pre class="ini">
    <i>#!/bin/sh</i>
<u>    poorhttp</u>=/usr/bin/poorhttp              <i># path to poorhttp python script</i>
<u>    pidfile</u>=/var/run/poorhttp.pid           <i># default path to pid file</i>
<u>    config</u>=/etc/poorhttp.ini                <i># default path to configuration file</i>
<u>
    python</u>=python                           <i># python interpretre, could be pytho2.6 for example</i>
    ...</pre></div>
                      <h2>Get Poor HTTP
        <span class="links">
          <a name="Get Poor HTTP" href="#Get Poor HTTP">link</a> |
          <a href="#">top</a></span></h2>
                      <h4>Source tarball
        <span class="links">
          <a name="Source tarball" href="#Source tarball">link</a> |
          <a href="#">top</a></span></h4>
                      <div><pre class="text">
    Not yet</pre></div>
                      <h4>Source from git
        <span class="links">
          <a name="Source from git" href="#Source from git">link</a> |
          <a href="#">top</a></span></h4>
                      <div><pre class="text">
    ~$ git clone git@github.com:PoorHttp/PoorHTTP.git
    or
    ~$ git clone <a href="https://github.com/PoorHttp/PoorHTTP.git">https://github.com/PoorHttp/PoorHTTP.git</a></pre></div>
                      <h4>Install from PyPI
        <span class="links">
          <a name="Install from PyPI" href="#Install from PyPI">link</a> |
          <a href="#">top</a></span></h4>
                      <div><pre class="text">
    Not yet</pre></div>
                      <h2>Configuration
        <span class="links">
          <a name="Configuration" href="#Configuration">link</a> |
          <a href="#">top</a></span></h2>
                      <div>In configuration file, there are know too sections, first http is for Poor
HTTP server. Here you can set:</div>
                      <h4>port
        <span class="links">
          <a name="port" href="#port">link</a> |
          <a href="#">top</a></span></h4>
                      <div>If port is set in command line, this variable will be ignored. Default value
is 8080 is not set.</div>
                      <h4>address
        <span class="links">
          <a name="address" href="#address">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Address, where server is listen on. What support wsgiref simple server, that
support Poor HTTP too. Default value is 127.0.0.1, and like as port, if this
value is set in command line argument, value from config file was be ignored.</div>
                      <h4>pidfile
        <span class="links">
          <a name="pidfile" href="#pidfile">link</a> |
          <a href="#">top</a></span></h4>
                      <div>File which server store its pid to. Default value is<i>var</i>run/poorhttp.pid,
and it is write with user, under which is server start - real user. Like as
port or address, value in config file is ignored, if is set in command line
arguments.</div>
                      <h4>user & group
        <span class="links">
          <a name="user & group" href="#user & group">link</a> |
          <a href="#">top</a></span></h4>
                      <div>This variables works only on posix system. User and group is effective user
and group, which process run under. Mechanism is simple, if you run server
under root privileges, and one of these variable is set, daemon do this:<br>
<code class="param">1) </code>create pid file<br>
<code class="param">2) </code>bind address and port <br>
<code class="param">3) </code>change log owner user and group to effective<br>
<code class="param">4) </code>change effective group<br>
<code class="param">5) </code>change effective user<br>
<code class="param">6) </code>run server<br><br>

Variables have no default values. It could be strings and it is use only if
real user which run daemon have privileges to change its effective user.
Concretely it must be root with id 0.</div>
                      <h4>webmaster
        <span class="links">
          <a name="webmaster" href="#webmaster">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Email address which is set as SERVER_ADMIN environment variable. Default
value is root@localhost.</div>
                      <h4>errorlog
        <span class="links">
          <a name="errorlog" href="#errorlog">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Path to error log file. File must be writable to process user. Default value
is <code>/var/log/poorhttp-error.log</code>.</div>
                      <h4>accesslog
        <span class="links">
          <a name="accesslog" href="#accesslog">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Path to access log file. File must be writable to process user. Default value
is <code>/var/log/poorhttp-access.log</code>. Access log style is similar to other big
servers style like Apache.
<pre class="text">
    client.host server.host - [18/Sep/2013 23:29:01] "GET / HTTP/1.1" 200 514</pre></div>
                      <h4>type
        <span class="links">
          <a name="type" href="#type">link</a> |
          <a href="#">top</a></span></h4>
                      <div>One of server type. Values could be <code>single, forking or threading</code>. Default
value is single.</div>
                      <h4>application
        <span class="links">
          <a name="application" href="#application">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Path to python file, to the web wsgi application. By default value is empty.
With application, to python path application path is insert. So Poor HTTP server
import this file as module from python path.</div>
                      <h4>path
        <span class="links">
          <a name="path" href="#path">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Additional python path, which is a insert to python path environment. Default
value is <code>./</code>. If you want to add more paths, separate them with colon. For
example:
<pre class="ini">
<u>    path</u> = ./:/my/app/:/my/app/lib      <i># add to path ./, /my/app and /my/app/lib</i></pre></div>
                      <h4>optimize
        <span class="links">
          <a name="optimize" href="#optimize">link</a> |
          <a href="#">top</a></span></h4>
                      <div>Python optimize type. This option is not use yet, and optimize is set as <code>-O</code>
in init.d sctipt, if debug is not set.</div>
                      <h4>debug
        <span class="links">
          <a name="debug" href="#debug">link</a> |
          <a href="#">top</a></span></h4>
                      <div>This option is read only in init.d script. If is set false, <code>-O</code> optimize
parameter is use.</div>
                      <h3>environ
        <span class="links">
          <a name="environ" href="#environ">link</a> |
          <a href="#">top</a></span></h3>
                      <div>There is environ section in configuration ini file. In this section, wsgi
environs are set. You can simple set as variable = environ. Last variable
value is used.
<pre class="ini">
<b>    [environ]</b>
<u>    app_email</u> = noreply@application.com     <i># app_email variable is set to {noreply@application.com}</i>
<u>    poor_Debug</u> = On                         <i># poor_Debug from Poor WSGI connector is set to {On}</i>
<u>    author</u> = Top Secret                     <i># author variable is set to {Top Secret}</i></pre></div>
                      <h2>History and Future
        <span class="links">
          <a name="History and Future" href="#History and Future">link</a> |
          <a href="#">top</a></span></h2>
                      <div>As is write and top of this documentation, Poor HTTP is only WSGI Server path
of Poor Http project. I don't know if some functionality will be add to this
server component. There are some another good wsgi servers. If you found some
good one, use uWsgi at <a href="http://projects.unbit.it/uwsgi/">http://projects.unbit.it/uwsgi/</a><br><br>

Poor HTTP is not full http server, it is only daemon, which can run python
wsgi application on HTTP protocol. It is really fast. But be careful, with
putting it to production environment. It is important to be hidden after some
http proxy, like Lighttpd or Nginx.</div>
                      <h3>ChangeLog
        <span class="links">
          <a name="ChangeLog" href="#ChangeLog">link</a> |
          <a href="#">top</a></span></h3>
                      <div>pre-release<br>
<code class="param">* </code>Poor Http has it's own repository<br>
<code class="param">* </code>Big code review and preparing for self package.  <br>
<code class="param">* </code>delete importing - didn't work <br>
<code class="param">* </code>daemon user and group support <br>
<code class="param">* </code>python package with distutils <br>
<code class="param">* </code>configuration review <br>
<code class="param">* </code>right pid self cleaning <br>
<code class="param">* </code>working user environment setting <br>
<code class="param">* </code>some additional comments<br>
<code class="param">
</code>20121130<br>
<code class="param">* </code>Webmaster mail bug fix<br>
<code class="param">* </code>Logging bug fix<br>
<code class="param">* </code>Poorwsgi could return files or directory index, so no dispatch_table.py<br>
<code class="param">  </code>could not be error<br>
<code class="param">* </code>Poorhttp is simple wsgi server<br>
<code class="param">* </code>rename http to phttp<br>
<code class="param">* </code>Document Listing and get file support<br>
<code class="param">* </code>users handler error calling<br>
<code class="param">* </code>Bug fix <br>
<code class="param">* </code>Environment fix<br>
<code class="param">* </code>Flushing buffer bug fix<br>
<code class="param">* </code>Some bug fix for run with uWsgi<br>
<code class="param">* </code>Poorhttp is only wsgi server now.<br>
<code class="param">* </code>And poorwsgi is python wsgi framework which coud be connect with anotger<br>
<code class="param">  </code>wsgi servers.<br>
<code class="param">* </code>Method setreq is pre_process now.<br>
<code class="param">* </code>Another post_process method is available.<br>
<code class="param">* </code>Default handler as default_handler is available for other uri which is not<br>
<code class="param">  </code>in handlers list.<br>
<code class="param">* </code>Read method for request in poorhttp.<br>
<code class="param">* </code>Cookie bug fix with expire time and multiple cookie header support in<br>
<code class="param">  </code>poorhttp<br>
<code class="param">* </code>fce support for getlist FieldStorage method<br>
<code class="param">* </code>Directory listing, more compatible sendfile method and default it works<br>
<code class="param">  </code>html page.<br>
<code class="param">* </code>Example is move to /app as default 'it works' example code. <br><br>

20120211<br>
<code class="param">* </code>File listing support as default handler for directory if new config<br>
<code class="param">  </code>option index is enabled.<br>
<code class="param">* </code>Little bugfix with document config option.<br><br>

20111208:<br>
<code class="param">* </code>convertor in FieldStorage<br>
<code class="param">* </code>html error update<br>
<code class="param">* </code>Doxygen support<br>
<code class="param">* </code>example code<br>
<code class="param">* </code>comments and documentation<br>
<code class="param">* </code>bug fixes<br><br>

20100729:<br>
<code class="param">* </code>apache compatibility<br>
<code class="param">* </code>single / forking / thrading mode<br>
<code class="param">* </code>bugfixing and error handlers captching and loging<br>
<code class="param">* </code>more status codes<br><br>

20091130:<br>
<code class="param">* </code>cookie session id is generate from expirydate by crypting<br>
<code class="param">* </code>new method renew in cookie session<br><br>

20091126:<br>
<code class="param">* </code>new configurable value server secret key added<br>
<code class="param">* </code>new function hidden in session module for text crypting<br>
<code class="param">* </code>handled config error exception<br>
<code class="param">* </code>bug fix in loging</div>
              </div><!-- content --!>      
      <div class="footer">
        <div class="line"></div>
        <div class="credit">
            Create by Ondřej Tůma (<a href="http://ipv6.mcbig.cz">McBig</a>).
            &copy; 2013. Generate by
            <a href="http://poorhttp.zeropage.cz/jinja24doc.html">Jinja24doc</a>.
        </div>
      </div><!-- footer --!>
    </div><!-- page --!>
  </body>
</html>
